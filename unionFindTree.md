# Union Find (Disjoint Set Union) data structure
Огтлолцолгүй олонлогуудын өгөгдлийн бүтэц

Union Find өгөгдлийн бүтэц нь олонлогуудыг хоорондоо давхцаж байгаа эсэх, олонлогуудыг хооронд нь нийлүүлэх үйлдлийг хурдан хугацаанд хийх боломж олгодог өгөгдлийн бүтэц юм.
Жишээ нь: Хотууд хооронд замууд байгаа гэж бодоход аль хотоос аль хот руу хэд хэдэн зам дамжин очих боломжтой эсэхийг олох.

Хоорондоо холбоотой орой элементүүдийг нэг олонлог гэж үзээд,
тухайн олонлогыг төлөөлөх нэг элемент сонгоно. Тухайн олонлогын бусад элементийн хувьд төлөөлөгч* нь тэр элемент гэдгийг нь тусдаа векторт сануулна. 
2 олонлогыг нийлүүлэх үед тухайн 2 олонлогын төлөөлөгчийг а,б гэвэл а-ийн төлөөлөгч нь б гэж сануулахад хангалттай.

## Union Find байгуулах
Анх бүх элемент нь холбогдоогүй тул өөрсдөө олонлогын төлөөлөгч байна.
```cpp
vector<int> par(n);
for(int i=0;i<n;i++){
    par[i] = i; // өөрсдөө төлөөлөгч
}
//u-ийн харьяалагдах олонлогын төлөөлөгч нь v эсвэл v-ийн төлөөлөгч нь байна гэсэн үг.
par[u] = v;

```

## Олонлогын төлөөлөгчийг олох
u элементийн харьяалагдах олонлогын төлөөлөгчийг нь рекурсив функц ашиглан олно.
```cpp
int root(int u){
    if(par[u]==u) return u; //өөрөө төлөөлөгч бол өөрийг нь буцаана.
    int rt = root(par[u]);  //өөрийнх нь төлөөлөгчийг нь олно.
    par[u] = rt;    //дахин хайлт хийхгүйн тулд олсон мэдээллээ хадгална.
    return rt;
}
```

## 2 олонлогыг нэгтгэх
2 олонлогыг нийлүүлэх бол тухайн 2 олонлогын төлөөлөгчүүдийн аль нэгийг нь нөгөөгийнхөө төлөөлөгч болгоно.
```cpp
void join(int u, int v){
    int ru = root(u);   //u-ийн төлөөлөгчийг олно
    int rv = root(v);   //v--ийн төлөөлөгчийг олно
    if(ru==rv) return;  //нэг олонлогт харьяалагддаг бол дуусгана.
    par[ru] = rv;   //rv-г нийлсэн олонлогын төлөөлөгчөөр сонгоно.
}
```
<br>

## Шинж чанар
1. Хоорондоо холбогдоогүй олонлогын тоо нь par[i]==i байх элементийн тоотой тэнцүү.(join() дотор энэ тоог байнга тооцоод явж болно.)
2. u-ийн төлөөлөгч нь v-ийн төлөөлөгчтэй адилхан бол u,v хоёр нь нэг олонлогт харьяалагддаг.
3. par(ent) вектортой адилхан зарчмаар хадгалах зарчмаар олонлогын талаарх нэмэлт мэдээллийг тооцоолох боломжтой. Жишээ нь: Тухайн олонлогт хэдэн элемент байгаа тоо, Элемент болгонд оноогдсон байгаа тоонуудын нийлбэр зэрэг

```
Дасгал1
Өгөгдсөн граф-д хоорондоо холбоогүй хичнээн хэсэг байгааг ол.
u,v 2 орой нь холбогдсон мөн v,t 2 орой нь холбоотой байвал u,t 2 оройг хоорондоо холбоотой гэж үзнэ.
Эхний мөрөнд N болон M тоо өгөгдөнө. Дараагын М мөр болгонд u,v гэсэн 2 тоо өгөгдөх ба энэ нь u,v 2 орой ирмэгээр холбогдсонг илтгэнэ.
input1:
10 9
1 2
1 4
2 5
2 4
4 5
6 7
7 0
0 6
8 0
output1:
4

input2:
7 8
0 1
1 3
1 4
2 3
4 3
6 3
4 5
6 4
output2:
1
```

```
Дасгал2
Өгөгдсөн графын 0 оройтой холбоотой оройн тоог ол.(0 оройг мөн тооцно)
u,v 2 орой нь холбогдсон мөн v,t 2 орой нь холбоотой байвал u,t 2 оройг хоорондоо холбоотой гэж үзнэ.
Эхний мөрөнд N болон M тоо өгөгдөнө. Дараагын М мөр болгонд u,v гэсэн 2 тоо өгөгдөх ба энэ нь u,v 2 орой ирмэгээр холбогдсонг илтгэнэ.
input1:
10 9
1 2
1 4
2 5
2 4
4 5
6 7
7 0
0 6
8 0
output1:
4

input2:
7 7
0 1
1 3
1 4
4 3
6 3
4 5
6 4
output2:
6
```

```
Дасгал3
Өгөгдсөн графын хоорондоо холбоотой хэсгүүд болгонд харьяалагдах оройн тоог өсөх эрэмбээр хэвлэ.
u,v 2 орой нь холбогдсон мөн v,t 2 орой нь холбоотой байвал u,t 2 оройг хоорондоо холбоотой гэж үзнэ.
Эхний мөрөнд N болон M тоо өгөгдөнө. Дараагын М мөр болгонд u,v гэсэн 2 тоо өгөгдөх ба энэ нь u,v 2 орой ирмэгээр холбогдсонг илтгэнэ.
input1:
10 9
1 2
1 4
2 5
2 4
4 5
6 7
7 0
0 6
8 0
output1:
1 1 4 4

input2:
7 7
0 1
1 3
1 4
4 3
6 3
4 5
6 4
output2:
1 6
```

```
Дасгал4
Өгөгдсөн графын бүх оройнууд хоорондоо холбогддог байхаар хамгийн багадаа хэдэн ирмэг нэмэх вэ гэдгийг ол.
u,v 2 орой нь холбогдсон мөн v,t 2 орой нь холбоотой байвал u,t 2 оройг хоорондоо холбоотой гэж үзнэ.
Эхний мөрөнд N болон M тоо өгөгдөнө. Дараагын М мөр болгонд u,v гэсэн 2 тоо өгөгдөх ба энэ нь u,v 2 орой ирмэгээр холбогдсонг илтгэнэ.
input1:
10 9
1 2
1 4
2 5
2 4
4 5
6 7
7 0
0 6
8 0
output1:
3

input2:
7 7
0 1
1 3
1 4
4 3
6 3
4 5
6 4
output2:
1
```


```
Дасгал5
Орой i дээр a[i] гэсэн тоо байгаа. Хоорондоо холбоотой олонлог болгоны хувьд тухайн олонлогт харьяалагдах оройн тоонуудын нийлбэрийг өсөх эрэмбээр хэвлэ.
u,v 2 орой нь холбогдсон мөн v,t 2 орой нь холбоотой байвал u,t 2 оройг хоорондоо холбоотой гэж үзнэ.
Эхний мөрөнд N болон M тоо өгөгдөнө. 
Дараагийн мөрөнд N ширхэг тоо өгөгдөнө.a[0],a[1],...a[N-1]
Дараагын М мөр болгонд u,v гэсэн 2 тоо өгөгдөх ба энэ нь u,v 2 орой ирмэгээр холбогдсонг илтгэнэ.
input1:
10 9
3 -8 20 5 1 3 1 6 1000 1000 
1 2
1 4
2 5
2 4
4 5
6 7
7 0
0 6
8 0
output1:
5 16 1000 1010

input2:
7 7
9 8 7 6 5 4 3
0 1
1 3
1 4
4 3
6 3
4 5
6 4
output2:
7 35
```